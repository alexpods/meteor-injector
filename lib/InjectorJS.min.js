!function(a,b,c,d){if("function"==typeof define&&define.amd)define(b,c,d);else if("object"==typeof exports&&exports){for(var e=0,f=c.length;f>e;++e){var g=c[e];"string"==typeof g&&(g=g.replace(/([A-Z]+)/g,function(a){return"-"+a.toLowerCase()}).replace(/^-/,""),c[e]=require(g))}var h=d.apply(a,c);for(var i in h)exports[i]=h[i]}else{for(var e=0,f=c.length;f>e;++e){var g=c[e];if("string"==typeof g){if(!(g in a))throw new Error('"'+b+'" dependent on non exited module "'+g+'"!');c[e]=a[g]}}a[b]=d.apply(a,c)}}(new Function("return this")(),"InjectorJS",["ClazzJS"],function(a,b){var c=a.namespace,d=c("InjectorJS").get("clazz"),e=c("InjectorJS").get("meta"),f=a._;c("InjectorJS",function(c,d){c("Injector",function(a){return{properties:{factory:{type:["hash"],"default":{}},defaultFactory:{converters:{fromString:function(a){return f.isUndefined(a)&&(a=this.getFactory(a)),a}},constraints:{exists:function(a){return this.hasFactory(a)}},"default":function(){var a=c("Factories/Object").create();return this.hasFactory(a)||this.setFactory(a),a}},_object:{type:["hash"],"default":{}},_objectCreator:{type:["hash"],"default":{}}},methods:{set:function(a,b,c){var d=this,e=this._resolveObjects(a,b,c);return f.each(e,function(a,b){f.each(a,function(a,c){d._setObjectCreator([c],d._createObjectCreator(b,a))})}),this},has:function(a){return this._hasObject([a])||this._hasObjectCreator([a])},get:function(a){return this._checkObject(a),this._hasObject([a])||this._setObject([a],this._getObjectCreator([a]).call())._removeObjectCreator([a]),this._getObject([a])},remove:function(a){return this._checkObject(a),this._hasObject([a])&&this._removeObject([a])||this._hasObjectCreator([a])&&this._removeObjectCreator([a])},setFactory:function(a,c){return f.isUndefined(c)&&(c=a,a=b),c&&c.__clazz&&c.__clazz.__isSubclazzOf("/InjectorJS/Factories/Abstract")?this.__setPropertyValue(["factory",c.getName()],c):this.__setPropertyValue(["factory"].concat(f.isString(a)?a.split("."):a||[]),c)},hasFactory:function(a){var b=f.isString(a)?a:a.getName();return this.__hasPropertyValue(["factory",b])},setDefaultFactory:function(a){return this.setFactory(a)},_checkObject:function(a){if(!this.has(a))throw new Error('Object "'+a+"' does not exists!'")},_resolveObjects:function(a,c,d){var e=this,g={},h=this.getDefaultFactory().getName();return f.isObject(a)?g=a:(f.isUndefined(d)&&(d=c,c=b),f.isUndefined(c)&&(c=h),g[c]={},g[c][a]=d),f.each(g,function(a,b){e.hasFactory(b)||(h in g||(g[h]={}),g[h][b]=a,delete g[b])}),g},_createObjectCreator:function(a,c){f.isUndefined(c)&&(c=a,a=b);var d=this;return function(){var b=f.isUndefined(a)?d.getDefaultFactory():d.getFactory(a),e=f.isFunction(c)?c.call(d):c;return f.isFunction(b)?b(e):b.create(e)}}}}}),c("ParameterProcessor",function(a){return{properties:{processor:{type:["hash",{element:"function"}],"default":function(){return{type:function(a,b,c,d){return e("/ClazzJS/Property/Type").apply(a,b,c,[],d)},constraints:function(a,b,c,d){return e("/ClazzJS/Property/Constraints").apply(a,b,c,[],d)},converters:function(a,b,c,d){return e("/ClazzJS/Property/Converters").apply(a,b,c,[],d)},"default":function(a,b,c,d){return(f.isUndefined(a)||f.isNull(a))&&(a=f.isFunction(b)?b.call(d):b),a}}}}},methods:{process:function(a,b,c,d){c=c||"unknown",d=d||this;var e=this,g=this.getProcessor();return f.each(b,function(b,f){f in g&&(a=g[f].call(e,a,b,c,d))}),a}}}}),d("Factories",function(b){b("Abstract",function(a){return{properties:{parameterProcessor:{type:["object",{instanceOf:"/InjectorJS/ParameterProcessor"}],"default":function(){return b("/InjectorJS/ParameterProcessor").create()}}},methods:{getName:function(){throw new Error("You must specify type name in child clazz!")},create:function(a){return this.createObject(this.processParams(a))},createObject:function(a){throw new Error('You must realize "createObject" method in child clazz!')},getParamsDefinition:function(){return{}},processParams:function(a){var b=this,c=this.getParamsDefinition(),d=this.getParameterProcessor();return f.each(a,function(e,f){if(!(f in c))throw new Error('Parameter "'+f+'" does not defined!');a[f]=d.process(e,c[f],f,b)}),a}}}}),b("Clazz","Abstract",function(b){return{properties:{clazz:{type:"function","default":function(){return a.clazz}}},methods:{getName:function(){return"clazz"},getParamsDefinition:function(){return{name:{type:"string"},parent:{type:"function"},deps:{type:["array"],"default":[]}}},createObject:function(a){var b=this.getClazz();return b(a.name,a.parent,a.deps)}}}}),b("Object","Abstract",function(a){return{methods:{getName:function(){return"object"},create:function(a){return a}}}}),b("Service","Abstract",function(a){return{methods:{getName:function(){return"service"},getParamsDefinition:function(){return{"class":{type:["function"]},init:{type:["array"],"default":[]},call:{type:["hash",{element:"array"}],"default":{}}}},createObject:function(a){var b=this._createService(a.class,a.init);return f.each(a.call,function(a,c){b[c].apply(b,a)}),b},_createService:function(a,b){var c=function(){return a.apply(this,b)};return c.prototype=a.prototype,new c}}}})})});var g=d("Injector"),h=d("ParameterProcessor"),i=h.create(),j=d("Factories/Abstract"),k=d("Factories/Object",j),l=d("Factories/Clazz",j),m=d("Factories/Service",j),n=k.create(),o=l.create(),p=m.create(),q=g.create().setFactory(n).setFactory(o).setFactory(p).setDefaultFactory(n);return{Factory:{Abstract:j,Object:k,Clazz:l,Service:m},Injector:g,ParameterProcessor:h,injector:q,parameterProcessor:i}});
//# sourceMappingURL=dist/InjectorJS.min.map